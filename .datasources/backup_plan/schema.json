
{
  "version": "2.0",
  "fields": [
    {
      "name": "planName",
      "type": "string",
      "description": "计划名称",
      "required": true
    },
    {
      "name": "frequency",
      "type": "string",
      "description": "备份频率",
      "required": true,
      "enum": ["daily", "weekly", "monthly"]
    },
    {
      "name": "timeOfDay",
      "type": "string",
      "description": "备份时间",
      "required": true
    },
    {
      "name": "dayOfWeek",
      "type": "string",
      "description": "周几(周备份时使用)",
      "enum": ["monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"]
    },
    {
      "name": "dayOfMonth",
      "type": "number",
      "description": "每月几号(月备份时使用)",
      "min": 1,
      "max": 28
    },
    {
      "name": "collections",
      "type": "array",
      "description": "备份的数据集合",
      "items": {
        "type": "string",
        "enum": ["activity", "user", "points_record", "donation_ledger", "volunteer_registration", "points_exchange"]
      },
      "required": true
    },
    {
      "name": "storageType",
      "type": "string",
      "description": "存储类型",
      "enum": ["cloud", "local"],
      "default": "cloud"
    },
    {
      "name": "status",
      "type": "string",
      "description": "状态",
      "enum": ["active", "inactive"],
      "default": "active"
    },
    {
      "name": "lastRunTime",
      "type": "timestamp",
      "description": "最后运行时间"
    },
    {
      "name": "nextRunTime",
      "type": "timestamp",
      "description": "下次运行时间"
    },
    {
      "name": "createdAt",
      "type": "timestamp",
      "description": "创建时间",
      "autoGenerate": true
    },
    {
      "name": "updatedAt",
      "type": "timestamp",
      "description": "更新时间",
      "autoGenerate": true
    }
  ],
  "indexes": [
    {
      "name": "status_index",
      "fields": ["status"]
    },
    {
      "name": "nextRunTime_index",
      "fields": ["nextRunTime"]
    }
  ]
}
